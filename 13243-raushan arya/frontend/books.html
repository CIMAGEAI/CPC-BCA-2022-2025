<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Books - LibraTech</title>
  <link rel="icon" href="favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%);
      color: #1e293b;
      min-height: 100vh;
    }

    .header {
      background: white;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.07);
      padding: 1rem 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      font-size: 1.7rem;
      font-weight: 800;
      color: #2563eb;
      text-decoration: none;
      letter-spacing: 1px;
    }

    .nav-links {
      display: flex;
      gap: 2rem;
      align-items: center;
    }

    .nav-link {
      color: #64748b;
      text-decoration: none;
      font-weight: 500;
      font-size: 1.08rem;
      transition: color 0.2s;
      position: relative;
    }
    .nav-link.active, .nav-link:hover {
      color: #2563eb;
    }
    .nav-link.active::after {
      content: '';
      display: block;
      width: 100%;
      height: 2px;
      background: #2563eb;
      border-radius: 2px;
      position: absolute;
      left: 0;
      bottom: -4px;
    }

    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem 3rem 1rem;
    }

    .page-header {
      margin-bottom: 2rem;
      text-align: center;
    }
    .page-title {
      font-size: 2.3rem;
      font-weight: 800;
      color: #1e293b;
      margin-bottom: 0.5rem;
      letter-spacing: 0.5px;
    }
    .page-subtitle {
      color: #64748b;
      font-size: 1.1rem;
    }

    .controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 2.5rem;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
    }
    .search-box {
      flex: 1;
      min-width: 320px;
      position: relative;
      max-width: 400px;
    }
    .search-input {
      width: 100%;
      padding: 0.85rem 1.1rem 0.85rem 2.5rem;
      border: 1.5px solid #d1d5db;
      border-radius: 0.7rem;
      font-size: 1.08rem;
      outline: none;
      background: #f1f5f9;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .search-input:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.09);
    }
    .search-box::before {
      content: '\1F50D';
      position: absolute;
      left: 0.9rem;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      color: #64748b;
      pointer-events: none;
    }
    .filter-select {
      padding: 0.8rem 1.2rem;
      border: 1.5px solid #d1d5db;
      border-radius: 0.7rem;
      font-size: 1.08rem;
      background: #f1f5f9;
      outline: none;
      cursor: pointer;
      min-width: 160px;
      transition: border-color 0.2s;
    }
    .filter-select:focus {
      border-color: #2563eb;
    }
    .add-book-btn {
      background: linear-gradient(90deg, #2563eb 60%, #7c3aed 100%);
      color: white;
      border: none;
      padding: 0.85rem 2rem;
      border-radius: 0.7rem;
      font-size: 1.08rem;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.08);
      transition: background 0.2s, box-shadow 0.2s;
    }
    .add-book-btn:hover {
      background: linear-gradient(90deg, #1d4ed8 60%, #6d28d9 100%);
      box-shadow: 0 4px 16px rgba(37, 99, 235, 0.13);
    }

    .books-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
      margin-bottom: 2rem;
    }
    .book-card {
      background: white;
      border-radius: 1.1rem;
      box-shadow: 0 2px 16px rgba(37, 99, 235, 0.09);
      overflow: hidden;
      transition: transform 0.18s, box-shadow 0.18s;
      display: flex;
      flex-direction: column;
      min-height: 420px;
      position: relative;
    }
    .book-card:hover {
      transform: translateY(-6px) scale(1.025);
      box-shadow: 0 8px 32px rgba(37, 99, 235, 0.16);
    }
    .book-cover {
      width: 100%;
      height: 210px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 3.5rem;
      font-weight: 800;
      letter-spacing: 1px;
      position: relative;
    }
    .book-cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 0.7rem 0.7rem 0 0;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.09);
    }
    .book-info {
      padding: 1.5rem 1.2rem 1.2rem 1.2rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .book-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: #1e293b;
      margin-bottom: 0.4rem;
      line-height: 1.3;
      letter-spacing: 0.2px;
    }
    .book-author {
      color: #64748b;
      font-size: 1.05rem;
      margin-bottom: 0.7rem;
      font-weight: 500;
    }
    .book-details {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      margin-bottom: 0.7rem;
    }
    .book-detail {
      display: flex;
      justify-content: space-between;
      font-size: 0.97rem;
    }
    .book-detail-label {
      color: #64748b;
      font-weight: 500;
    }
    .book-detail-value {
      color: #1e293b;
      font-weight: 600;
    }
    .book-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.7rem;
    }
    .status-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    .status-available {
      background: #10b981;
    }
    .status-limited {
      background: #f59e0b;
    }
    .status-unavailable {
      background: #ef4444;
    }
    .status-text {
      font-size: 0.97rem;
      font-weight: 600;
    }
    .book-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.7rem;
    }
    .action-btn {
      flex: 1;
      padding: 0.6rem;
      border: none;
      border-radius: 0.5rem;
      font-size: 0.97rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.18s;
      box-shadow: 0 1px 4px rgba(37, 99, 235, 0.07);
    }
    .btn-primary {
      background: linear-gradient(90deg, #2563eb 60%, #7c3aed 100%);
      color: white;
    }
    .btn-primary:hover {
      background: linear-gradient(90deg, #1d4ed8 60%, #6d28d9 100%);
    }
    .btn-secondary {
      background: #f1f5f9;
      color: #64748b;
    }
    .btn-secondary:hover {
      background: #e2e8f0;
    }
    .btn-danger {
      background: #ef4444;
      color: white;
    }
    .btn-danger:hover {
      background: #dc2626;
    }
    .loading {
      text-align: center;
      padding: 2.5rem 0;
      color: #64748b;
      font-size: 1.2rem;
    }
    .error {
      text-align: center;
      padding: 2.5rem 0;
      color: #ef4444;
      font-size: 1.2rem;
    }
    .pagination {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 2rem;
    }
    .page-btn {
      padding: 0.6rem 1.2rem;
      border: 1.5px solid #d1d5db;
      background: white;
      color: #64748b;
      border-radius: 0.5rem;
      cursor: pointer;
      font-size: 1.05rem;
      font-weight: 600;
      transition: all 0.18s;
    }
    .page-btn:hover {
      background: #f8fafc;
      border-color: #2563eb;
      color: #2563eb;
    }
    .page-btn.active {
      background: #2563eb;
      color: white;
      border-color: #2563eb;
    }
    .page-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
    }
    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: white;
      border-radius: 1.1rem;
      padding: 2.2rem 2rem 2rem 2rem;
      max-width: 500px;
      width: 95%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 4px 32px rgba(37, 99, 235, 0.13);
    }
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    .modal-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #1e293b;
    }
    .close-btn {
      background: none;
      border: none;
      font-size: 1.7rem;
      cursor: pointer;
      color: #64748b;
      transition: color 0.18s;
    }
    .close-btn:hover {
      color: #2563eb;
    }
    .form-group {
      margin-bottom: 1.1rem;
    }
    .form-label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: #374151;
    }
    .form-input {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 1.5px solid #d1d5db;
      border-radius: 0.7rem;
      font-size: 1.08rem;
      outline: none;
      background: #f1f5f9;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    .form-input:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.09);
    }
    .form-textarea {
      resize: vertical;
      min-height: 100px;
    }
    .form-actions {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    .btn {
      padding: 0.85rem 2rem;
      border: none;
      border-radius: 0.7rem;
      font-size: 1.08rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-cancel {
      background: #f1f5f9;
      color: #64748b;
    }
    .btn-cancel:hover {
      background: #e2e8f0;
    }
    .btn-submit {
      background: linear-gradient(90deg, #2563eb 60%, #7c3aed 100%);
      color: white;
    }
    .btn-submit:hover {
      background: linear-gradient(90deg, #1d4ed8 60%, #6d28d9 100%);
    }

    /* Masonry grid styles */
    .masonry-grid {
      column-count: 3;
      column-gap: 2rem;
      margin-bottom: 2.5rem;
      width: 100%;
    }
    @media (max-width: 900px) {
      .masonry-grid { column-count: 2; }
    }
    @media (max-width: 600px) {
      .masonry-grid { column-count: 1; }
    }
    .masonry-item {
      break-inside: avoid;
      margin-bottom: 2rem;
      display: block;
      width: 100%;
    }
    /* Ensure book cards are visible */
    .book-card {
      background: white;
      border-radius: 1.1rem;
      box-shadow: 0 2px 16px rgba(37, 99, 235, 0.09);
      overflow: hidden;
      transition: transform 0.18s, box-shadow 0.18s;
      display: flex;
      flex-direction: column;
      min-height: 420px;
      position: relative;
      margin-bottom: 2rem;
      width: 100%;
    }
    .book-card:hover {
      transform: translateY(-6px) scale(1.025);
      box-shadow: 0 8px 32px rgba(37, 99, 235, 0.16);
    }
    .book-cover {
      width: 100%;
      height: 210px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 3.5rem;
      font-weight: 800;
      letter-spacing: 1px;
      position: relative;
    }
    .book-cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 0.7rem 0.7rem 0 0;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.09);
    }
    .book-info {
      padding: 1.5rem 1.2rem 1.2rem 1.2rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      background: white;
    }
    /* Horizontal carousel styles */
    .carousel-section {
      margin-bottom: 2.5rem;
    }
    .carousel-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 1rem;
      color: #2563eb;
    }
    .carousel-row {
      display: flex;
      overflow-x: auto;
      gap: 1.5rem;
      padding-bottom: 0.5rem;
      scroll-snap-type: x mandatory;
    }
    .carousel-card {
      min-width: 260px;
      max-width: 260px;
      background: white;
      border-radius: 1.1rem;
      box-shadow: 0 2px 16px rgba(37, 99, 235, 0.09);
      overflow: hidden;
      transition: transform 0.18s, box-shadow 0.18s;
      display: flex;
      flex-direction: column;
      scroll-snap-align: start;
    }
    .carousel-card:hover {
      transform: translateY(-6px) scale(1.025);
      box-shadow: 0 8px 32px rgba(37, 99, 235, 0.16);
    }
    .carousel-cover {
      width: 100%;
      height: 160px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2.2rem;
      font-weight: 800;
      letter-spacing: 1px;
      position: relative;
    }
    .carousel-cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 0.7rem 0.7rem 0 0;
    }
    .carousel-info {
      padding: 1.1rem 1rem 1rem 1rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .carousel-title-text {
      font-size: 1.08rem;
      font-weight: 700;
      color: #1e293b;
      margin-bottom: 0.3rem;
      line-height: 1.3;
      letter-spacing: 0.2px;
    }
    .carousel-author {
      color: #64748b;
      font-size: 0.97rem;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    .carousel-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }
    .carousel-btn {
      flex: 1;
      padding: 0.5rem;
      border: none;
      border-radius: 0.5rem;
      font-size: 0.97rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.18s;
      box-shadow: 0 1px 4px rgba(37, 99, 235, 0.07);
    }
    .carousel-btn-primary {
      background: linear-gradient(90deg, #2563eb 60%, #7c3aed 100%);
      color: white;
    }
    .carousel-btn-secondary {
      background: #f1f5f9;
      color: #64748b;
    }
    .carousel-btn-primary:hover {
      background: linear-gradient(90deg, #1d4ed8 60%, #6d28d9 100%);
    }
    .carousel-btn-secondary:hover {
      background: #e2e8f0;
    }
    /* Badge styles */
    .book-badge, .carousel-badge {
      position: absolute;
      top: 14px;
      left: 14px;
      background: linear-gradient(90deg, #ffb347 0%, #ff7e5f 100%);
      color: #fff;
      font-size: 0.92rem;
      font-weight: 700;
      padding: 0.32em 0.9em;
      border-radius: 1em;
      box-shadow: 0 2px 8px rgba(255, 126, 95, 0.13);
      letter-spacing: 0.5px;
      z-index: 2;
      animation: badge-pop 0.7s cubic-bezier(.68,-0.55,.27,1.55);
    }
    .carousel-badge {
      left: 10px;
      top: 10px;
      font-size: 0.88rem;
      padding: 0.25em 0.7em;
    }
    @keyframes badge-pop {
      0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
      60% { transform: scale(1.15) rotate(3deg); opacity: 1; }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }
    /* Card flip styles */
    .book-card, .carousel-card {
      perspective: 1200px;
    }
    .flip-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.7s cubic-bezier(.4,2,.3,1);
      transform-style: preserve-3d;
    }
    /* Remove card flip on hover */
    .book-card:hover .flip-inner, .carousel-card:hover .flip-inner {
      transform: none !important;
    }
    .flip-front, .flip-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      top: 0; left: 0;
      border-radius: inherit;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .flip-front { z-index: 2; }
    .flip-back {
      background: linear-gradient(135deg, #e0e7ff 0%, #f8fafc 100%);
      color: #1e293b;
      transform: rotateY(180deg);
      z-index: 3;
      box-shadow: 0 2px 16px rgba(37,99,235,0.09);
      padding: 1.2rem 1.1rem 1.1rem 1.1rem;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    .flip-desc {
      font-size: 1.02rem;
      color: #374151;
      margin-bottom: 1.1rem;
      font-style: italic;
      min-height: 2.5em;
    }
    .flip-meta {
      font-size: 0.97rem;
      color: #64748b;
      margin-bottom: 0.5rem;
    }
    .flip-back .book-title, .flip-back .carousel-title-text {
      font-size: 1.13rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: #2563eb;
    }
    /* Add modal overlay style */
    .modal#viewBookModal {
      background: rgba(37,99,235,0.13);
    }
    /* Fallback grid for when masonry doesn't work */
    .fallback-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
      column-count: auto;
    }
    .fallback-grid .masonry-item {
      break-inside: auto;
      margin-bottom: 0;
    }
    /* Enhanced Peach Bokeh Background with More Animation */
    .bokeh-bg {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
      overflow: hidden;
    }
    .bokeh-bg .bokeh-gradient {
      position: absolute;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: radial-gradient(ellipse at 60% 30%, #ffe5d0 0%, #fff0e5 60%, transparent 100%);
      opacity: 0.7;
      z-index: 1;
      pointer-events: none;
    }
    .bokeh-bg .bokeh-circle {
      position: absolute;
      border-radius: 50%;
      filter: blur(38px);
      opacity: 0.32;
      pointer-events: none;
      z-index: 2;
      animation-timing-function: ease-in-out;
    }
    /* More circles, more colors, more movement, rotation, and pulsing */
    .bokeh-bg .bokeh1 { width: 340px; height: 340px; background: #ffd1b3; left: 5vw; top: 8vh; opacity: 0.38; animation: bokehFloat1 18s infinite alternate, bokehRotate 40s linear infinite; }
    .bokeh-bg .bokeh2 { width: 220px; height: 220px; background: #ffbfae; left: 60vw; top: 12vh; opacity: 0.32; animation: bokehFloat2 22s infinite alternate, bokehPulse 18s ease-in-out infinite; }
    .bokeh-bg .bokeh3 { width: 180px; height: 180px; background: #ffe0c7; left: 30vw; top: 60vh; opacity: 0.28; animation: bokehFloat3 20s infinite alternate, bokehRotateReverse 35s linear infinite; }
    .bokeh-bg .bokeh4 { width: 140px; height: 140px; background: #ffcba4; left: 80vw; top: 70vh; opacity: 0.34; animation: bokehFloat4 19s infinite alternate, bokehPulse 15s ease-in-out infinite; }
    .bokeh-bg .bokeh5 { width: 200px; height: 200px; background: #ffd6b3; left: 15vw; top: 80vh; opacity: 0.30; animation: bokehFloat5 23s infinite alternate, bokehRotate 50s linear infinite; }
    .bokeh-bg .bokeh6 { width: 120px; height: 120px; background: #ffbfae; left: 75vw; top: 25vh; opacity: 0.22; animation: bokehFloat6 17s infinite alternate, bokehPulse 13s ease-in-out infinite; }
    .bokeh-bg .bokeh7 { width: 260px; height: 260px; background: #ffe5d0; left: 50vw; top: 75vh; opacity: 0.26; animation: bokehFloat7 21s infinite alternate, bokehRotateReverse 60s linear infinite; }
    .bokeh-bg .bokeh8 { width: 100px; height: 100px; background: #ffcba4; left: 85vw; top: 50vh; opacity: 0.18; animation: bokehFloat8 16s infinite alternate, bokehPulse 11s ease-in-out infinite; }
    .bokeh-bg .bokeh9 { width: 180px; height: 180px; background: #ffd1b3; left: 10vw; top: 40vh; opacity: 0.24; animation: bokehFloat9 25s infinite alternate, bokehRotate 55s linear infinite; }
    .bokeh-bg .bokeh10 { width: 90px; height: 90px; background: #ffe0c7; left: 40vw; top: 10vh; opacity: 0.16; animation: bokehFloat10 15s infinite alternate, bokehPulse 9s ease-in-out infinite; }
    @keyframes bokehFloat1 { 0%{transform:translateY(0) scale(1);} 100%{transform:translateY(-30px) scale(1.08);} }
    @keyframes bokehFloat2 { 0%{transform:translateY(0) scale(1);} 100%{transform:translateY(40px) scale(1.04);} }
    @keyframes bokehFloat3 { 0%{transform:translateX(0) scale(1);} 100%{transform:translateX(-30px) scale(1.1);} }
    @keyframes bokehFloat4 { 0%{transform:translateY(0) scale(1);} 100%{transform:translateY(-20px) scale(1.13);} }
    @keyframes bokehFloat5 { 0%{transform:translateX(0) scale(1);} 100%{transform:translateX(30px) scale(1.07);} }
    @keyframes bokehFloat6 { 0%{transform:translateY(0) scale(1);} 100%{transform:translateY(25px) scale(1.12);} }
    @keyframes bokehFloat7 { 0%{transform:translateX(0) scale(1);} 100%{transform:translateX(-20px) scale(1.05);} }
    @keyframes bokehFloat8 { 0%{transform:translateY(0) scale(1);} 100%{transform:translateY(-18px) scale(1.09);} }
    @keyframes bokehFloat9 { 0%{transform:translateX(0) scale(1);} 100%{transform:translateX(22px) scale(1.06);} }
    @keyframes bokehFloat10 { 0%{transform:translateY(0) scale(1);} 100%{transform:translateY(15px) scale(1.11);} }
    @keyframes bokehRotate { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
    @keyframes bokehRotateReverse { 0%{transform:rotate(0deg);} 100%{transform:rotate(-360deg);} }
    @keyframes bokehPulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.13);} }
    /* Sparkles */
    .bokeh-bg .sparkle {
      position: absolute;
      width: 12px; height: 12px;
      border-radius: 50%;
      background: radial-gradient(circle, #fffbe6 0%, #ffe0c7 60%, transparent 100%);
      opacity: 0.7;
      filter: blur(1.5px);
      z-index: 3;
      animation: sparkleTwinkle 2.5s infinite alternate;
      pointer-events: none;
    }
    .bokeh-bg .sparkle1 { left: 18vw; top: 22vh; animation-delay: 0.2s; }
    .bokeh-bg .sparkle2 { left: 68vw; top: 18vh; animation-delay: 1.1s; }
    .bokeh-bg .sparkle3 { left: 38vw; top: 78vh; animation-delay: 0.7s; }
    .bokeh-bg .sparkle4 { left: 82vw; top: 62vh; animation-delay: 1.7s; }
    .bokeh-bg .sparkle5 { left: 55vw; top: 45vh; animation-delay: 2.2s; }
    @keyframes sparkleTwinkle {
      0%,100% { opacity: 0.7; filter: blur(1.5px); }
      50% { opacity: 0.2; filter: blur(3.5px); }
    }
    body, .main-container { position: relative; z-index: 1; }
  </style>
</head>
<body>
  <div class="bokeh-bg"></div>
  <header class="header">
    <div class="header-content">
      <a href="index.html" class="logo">LibraTech</a>
      <nav class="nav-links">
        <a href="index.html" class="nav-link">Home</a>
        <a href="books.html" class="nav-link active">Books</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="contact.html" class="nav-link">Contact</a>
        <a href="login.html" class="nav-link">Login</a>
      </nav>
    </div>
  </header>

  <main class="main-container">
    <div class="page-header">
      <h1 class="page-title">Library Books</h1>
      <p class="page-subtitle">Browse and discover our collection of books</p>
    </div>

    <div class="controls">
      <div class="search-box">
        <input type="text" class="search-input" id="searchInput" placeholder="Search books by title, author, or ISBN...">
      </div>
      <select class="filter-select" id="genreFilter">
        <option value="">All Genres</option>
        <option value="Fiction">Fiction</option>
        <option value="Non-Fiction">Non-Fiction</option>
        <option value="Science Fiction">Science Fiction</option>
        <option value="Mystery">Mystery</option>
        <option value="Romance">Romance</option>
        <option value="Thriller">Thriller</option>
        <option value="Fantasy">Fantasy</option>
        <option value="Biography">Biography</option>
        <option value="History">History</option>
        <option value="Science">Science</option>
        <option value="Technology">Technology</option>
        <option value="Mythology">Mythology</option>
      </select>
      <select class="filter-select" id="availabilityFilter">
        <option value="">All Books</option>
        <option value="available">Available</option>
        <option value="limited">Limited Copies</option>
        <option value="unavailable">Unavailable</option>
      </select>
      <button class="add-book-btn" id="addBookBtn">Add Book</button>
    </div>

    <div id="carouselsContainer"></div>
    <div class="pagination" id="pagination"></div>
  </main>

  <!-- Add/Edit Book Modal -->
  <div class="modal" id="bookModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Add New Book</h2>
        <button class="close-btn" id="closeModal">&times;</button>
      </div>
      <form id="bookForm">
        <div class="form-group">
          <label class="form-label" for="title">Title *</label>
          <input type="text" class="form-input" id="title" name="title" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="author">Author *</label>
          <input type="text" class="form-input" id="author" name="author" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="isbn">ISBN *</label>
          <input type="text" class="form-input" id="isbn" name="isbn" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="genre">Genre *</label>
          <select class="form-input" id="genre" name="genre" required>
            <option value="">Select Genre</option>
            <option value="Fiction">Fiction</option>
            <option value="Non-Fiction">Non-Fiction</option>
            <option value="Science Fiction">Science Fiction</option>
            <option value="Mystery">Mystery</option>
            <option value="Romance">Romance</option>
            <option value="Thriller">Thriller</option>
            <option value="Fantasy">Fantasy</option>
            <option value="Biography">Biography</option>
            <option value="History">History</option>
            <option value="Science">Science</option>
            <option value="Technology">Technology</option>
            <option value="Mythology">Mythology</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label" for="description">Description</label>
          <textarea class="form-input form-textarea" id="description" name="description"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label" for="publisher">Publisher</label>
          <input type="text" class="form-input" id="publisher" name="publisher">
        </div>
        <div class="form-group">
          <label class="form-label" for="publicationYear">Publication Year</label>
          <input type="number" class="form-input" id="publicationYear" name="publicationYear" min="1000" max="2024">
        </div>
        <div class="form-group">
          <label class="form-label" for="totalCopies">Total Copies *</label>
          <input type="number" class="form-input" id="totalCopies" name="totalCopies" min="1" required>
        </div>
        <div class="form-group">
          <label class="form-label" for="availableCopies">Available Copies *</label>
          <input type="number" class="form-input" id="availableCopies" name="availableCopies" min="0" required>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-cancel" id="cancelBtn">Cancel</button>
          <button type="submit" class="btn btn-submit" id="submitBtn">Save Book</button>
        </div>
      </form>
    </div>
  </div>

  <!-- View Book Modal -->
  <div class="modal" id="viewBookModal">
    <div class="modal-content" id="viewBookModalContent">
      <button class="close-btn" id="closeViewBookModal">&times;</button>
      <div id="viewBookDetails"></div>
    </div>
  </div>

  <script src="api.js"></script>
  <script>
    // Initialize API service
    const api = new APIService();
    
    // Global variables
    let currentPage = 1;
    let currentBooks = [];
    let editingBookId = null;

    // DOM elements
    const carouselsContainer = document.getElementById('carouselsContainer');
    const searchInput = document.getElementById('searchInput');
    const genreFilter = document.getElementById('genreFilter');
    const availabilityFilter = document.getElementById('availabilityFilter');
    const addBookBtn = document.getElementById('addBookBtn');
    const bookModal = document.getElementById('bookModal');
    const modalTitle = document.getElementById('modalTitle');
    const closeModal = document.getElementById('closeModal');
    const cancelBtn = document.getElementById('cancelBtn');
    const bookForm = document.getElementById('bookForm');
    const submitBtn = document.getElementById('submitBtn');
    const pagination = document.getElementById('pagination');

    // Event listeners
    searchInput.addEventListener('input', debounce(loadBooks, 500));
    genreFilter.addEventListener('change', loadBooks);
    availabilityFilter.addEventListener('change', loadBooks);
    addBookBtn.addEventListener('click', openAddModal);
    closeModal.addEventListener('click', closeBookModal);
    cancelBtn.addEventListener('click', closeBookModal);
    bookForm.addEventListener('submit', handleBookSubmit);

    // Load books on page load
    document.addEventListener('DOMContentLoaded', loadBooks);

    // Debounce function
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Load books from API
    async function loadBooks() {
      try {
        console.log('Loading books...');
        carouselsContainer.innerHTML = '<div class="loading">Loading books...</div>';
        
        const params = {
          page: currentPage,
          limit: 12
        };

        if (genreFilter.value) {
          params.genre = genreFilter.value;
        }

        if (availabilityFilter.value) {
          params.available = availabilityFilter.value === 'available';
        }

        console.log('API params:', params);
        let response;
        if (searchInput.value) {
          console.log('Searching for:', searchInput.value);
          // Use the /api/books/search endpoint for search
          response = await api.books.search(searchInput.value, params);
        } else {
          console.log('Fetching all books...');
          // Use the /api/books endpoint for normal listing
          response = await api.books.getAll(params);
        }
        
        console.log('API response:', response);
        
        if (response.success) {
          currentBooks = response.data;
          console.log('Books loaded:', currentBooks.length);
          renderBooksMasonry();
          renderPagination(response.pagination);
        } else {
          throw new Error(response.message || 'Unknown error');
        }
      } catch (error) {
        console.error('Error loading books:', error);
        const errorMessage = error.message || 'Unknown error occurred';
        carouselsContainer.innerHTML = `<div class="error">Error loading books: ${errorMessage}<br><br>Please check if the backend server is running on port 5000.</div>`;
      }
    }

    // Render books
    function renderBooksMasonry() {
      console.log('Rendering books masonry, count:', currentBooks.length);
      if (currentBooks.length === 0) {
        carouselsContainer.innerHTML = '<div class="loading">No books found.</div>';
        return;
      }
      
      // Add fallback class if masonry doesn't work
      carouselsContainer.className = 'masonry-grid fallback-grid';
      
      const booksHTML = currentBooks.map(book => {
        console.log('Rendering book:', book.title);
        return `
          <div class="book-card masonry-item" title="${book.title}">
            <div class="flip-inner">
              <div class="flip-front">
                <div class="book-cover" style="position:relative;">
                  ${getBookBadges(book)}
                  ${book.coverImage && book.coverImage !== 'default-cover.jpg' ? `<img src="${book.coverImage}" alt="${book.title} Cover">` : book.title.charAt(0).toUpperCase()}
                </div>
                <div class="book-info">
                  <h3 class="book-title" title="${book.title}">${book.title}</h3>
                  <p class="book-author" title="${book.author}">by ${book.author}</p>
                  <div class="book-details">
                    <div class="book-detail">
                      <span class="book-detail-label">ISBN:</span>
                      <span class="book-detail-value">${book.isbn}</span>
                    </div>
                    <div class="book-detail">
                      <span class="book-detail-label">Genre:</span>
                      <span class="book-detail-value">${book.genre}</span>
                    </div>
                    <div class="book-detail">
                      <span class="book-detail-label">Copies:</span>
                      <span class="book-detail-value">${book.availableCopies}/${book.totalCopies}</span>
                    </div>
                  </div>
                  <div class="book-status">
                    <div class="status-indicator ${getStatusClass(book)}"></div>
                    <span class="status-text">${getStatusText(book)}</span>
                  </div>
                  <div class="book-actions">
                    <button class="action-btn btn-secondary" onclick="viewBook('${book._id}')" title="View details">View Details</button>
                    <button class="action-btn btn-primary" onclick="editBook('${book._id}')" title="Edit book">Edit</button>
                    <button class="action-btn btn-danger" onclick="deleteBook('${book._id}')" title="Delete book">Delete</button>
                  </div>
                </div>
              </div>
              <div class="flip-back">
                <div class="book-title">${book.title}</div>
                <div class="flip-desc">${book.description ? book.description : 'No description available.'}</div>
                <div class="flip-meta">Author: <b>${book.author}</b></div>
                <div class="flip-meta">Genre: <b>${book.genre}</b></div>
                <div class="flip-meta">ISBN: <b>${book.isbn}</b></div>
                <div class="flip-meta">Copies: <b>${book.availableCopies}/${book.totalCopies}</b></div>
              </div>
            </div>
          </div>
        `;
      }).join('');
      
      console.log('Setting innerHTML with books');
      carouselsContainer.innerHTML = booksHTML;
    }

    function renderPopularCarousel(popularBooks) {
      if (!popularBooks || popularBooks.length === 0) {
        carouselsContainer.innerHTML = '<div class="loading">No popular books found.</div>';
        return;
      }
      const carouselHTML = popularBooks.map(book => `
        <div class="carousel-card" title="${book.title}">
          <div class="flip-inner">
            <div class="flip-front">
              <div class="carousel-cover" style="position:relative;">
                ${getCarouselBadges(book)}
                ${book.coverImage && book.coverImage !== 'default-cover.jpg' ? `<img src="${book.coverImage}" alt="${book.title} Cover">` : book.title.charAt(0).toUpperCase()}
              </div>
              <div class="carousel-info">
                <div class="carousel-title-text" title="${book.title}">${book.title}</div>
                <div class="carousel-author" title="${book.author}">by ${book.author}</div>
                <div class="carousel-actions">
                  <button class="carousel-btn carousel-btn-secondary" onclick="viewBook('${book._id}')" title="View details">View</button>
                  <button class="carousel-btn carousel-btn-primary" onclick="editBook('${book._id}')" title="Edit book">Edit</button>
                </div>
              </div>
            </div>
            <div class="flip-back">
              <div class="carousel-title-text">${book.title}</div>
              <div class="flip-desc">${book.description ? book.description : 'No description available.'}</div>
              <div class="flip-meta">Author: <b>${book.author}</b></div>
              <div class="flip-meta">Genre: <b>${book.genre}</b></div>
              <div class="flip-meta">ISBN: <b>${book.isbn}</b></div>
              <div class="flip-meta">Copies: <b>${book.availableCopies}/${book.totalCopies}</b></div>
            </div>
          </div>
        </div>
      `).join('');
      carouselsContainer.innerHTML = carouselHTML;
    }

    // Get status class
    function getStatusClass(book) {
      if (book.availableCopies === 0) return 'status-unavailable';
      if (book.availableCopies < book.totalCopies * 0.3) return 'status-limited';
      return 'status-available';
    }

    // Get status text
    function getStatusText(book) {
      if (book.availableCopies === 0) return 'Unavailable';
      if (book.availableCopies < book.totalCopies * 0.3) return 'Limited Copies';
      return 'Available';
    }

    // Get book badges
    function getBookBadges(book) {
      const badges = [];
      // New: created in last 14 days
      if (book.createdAt && (Date.now() - new Date(book.createdAt).getTime()) < 14 * 24 * 60 * 60 * 1000) {
        badges.push('<span class="book-badge" style="background:linear-gradient(90deg,#4f8cff 0%,#7c3aed 100%)">New</span>');
      }
      // Popular: rating.count >= 5
      if (book.rating && book.rating.count >= 5) {
        badges.push('<span class="book-badge" style="background:linear-gradient(90deg,#ffb347 0%,#ff7e5f 100%)">Popular</span>');
      }
      // Limited: availableCopies < 30% of totalCopies and > 0
      if (book.availableCopies > 0 && book.availableCopies < book.totalCopies * 0.3) {
        badges.push('<span class="book-badge" style="background:linear-gradient(90deg,#f59e0b 0%,#ef4444 100%)">Limited</span>');
      }
      return badges.join('');
    }
    function getCarouselBadges(book) {
      const badges = [];
      if (book.createdAt && (Date.now() - new Date(book.createdAt).getTime()) < 14 * 24 * 60 * 60 * 1000) {
        badges.push('<span class="carousel-badge" style="background:linear-gradient(90deg,#4f8cff 0%,#7c3aed 100%)">New</span>');
      }
      if (book.rating && book.rating.count >= 5) {
        badges.push('<span class="carousel-badge" style="background:linear-gradient(90deg,#ffb347 0%,#ff7e5f 100%)">Popular</span>');
      }
      if (book.availableCopies > 0 && book.availableCopies < book.totalCopies * 0.3) {
        badges.push('<span class="carousel-badge" style="background:linear-gradient(90deg,#f59e0b 0%,#ef4444 100%)">Limited</span>');
      }
      return badges.join('');
    }

    // Render pagination
    function renderPagination(pagination) {
      if (!pagination) {
        pagination.innerHTML = '';
        return;
      }

      let paginationHTML = '';

      if (pagination.prev) {
        paginationHTML += `<button class="page-btn" onclick="goToPage(${pagination.prev.page})">Previous</button>`;
      }

      if (pagination.next) {
        paginationHTML += `<button class="page-btn" onclick="goToPage(${pagination.next.page})">Next</button>`;
      }

      pagination.innerHTML = paginationHTML;
    }

    // Go to page
    function goToPage(page) {
      currentPage = page;
      loadBooks();
    }

    // Open add modal
    function openAddModal() {
      editingBookId = null;
      modalTitle.textContent = 'Add New Book';
      bookForm.reset();
      bookModal.classList.add('show');
    }

    // Open edit modal
    function editBook(bookId) {
      const book = currentBooks.find(b => b._id === bookId);
      if (!book) return;

      editingBookId = bookId;
      modalTitle.textContent = 'Edit Book';
      
      // Fill form with book data
      document.getElementById('title').value = book.title;
      document.getElementById('author').value = book.author;
      document.getElementById('isbn').value = book.isbn;
      document.getElementById('genre').value = book.genre;
      document.getElementById('description').value = book.description || '';
      document.getElementById('publisher').value = book.publisher || '';
      document.getElementById('publicationYear').value = book.publicationYear || '';
      document.getElementById('totalCopies').value = book.totalCopies;
      document.getElementById('availableCopies').value = book.availableCopies;

      bookModal.classList.add('show');
    }

    // Close modal
    function closeBookModal() {
      bookModal.classList.remove('show');
      editingBookId = null;
    }

    // Handle book form submission
    async function handleBookSubmit(e) {
      e.preventDefault();
      
      const formData = new FormData(bookForm);
      const bookData = Object.fromEntries(formData.entries());
      
      // Convert number fields
      bookData.publicationYear = bookData.publicationYear ? parseInt(bookData.publicationYear) : undefined;
      bookData.totalCopies = parseInt(bookData.totalCopies);
      bookData.availableCopies = parseInt(bookData.availableCopies);

      try {
        submitBtn.disabled = true;
        submitBtn.textContent = 'Saving...';

        let response;
        if (editingBookId) {
          response = await api.books.update(editingBookId, bookData);
        } else {
          response = await api.books.create(bookData);
        }

        if (response.success) {
          closeBookModal();
          loadBooks();
          alert(editingBookId ? 'Book updated successfully!' : 'Book added successfully!');
        } else {
          throw new Error(response.message);
        }
      } catch (error) {
        console.error('Error saving book:', error);
        alert('Error saving book: ' + error.message);
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Save Book';
      }
    }

    // Modal logic
    const viewBookModal = document.getElementById('viewBookModal');
    const viewBookDetails = document.getElementById('viewBookDetails');
    const closeViewBookModal = document.getElementById('closeViewBookModal');
    closeViewBookModal.addEventListener('click', () => viewBookModal.classList.remove('show'));
    function showViewBookModal(html) {
      viewBookDetails.innerHTML = html;
      viewBookModal.classList.add('show');
    }
    // Enhanced viewBook function
    async function viewBook(bookId) {
      const book = currentBooks.find(b => b._id === bookId);
      if (!book) return;
      let qrHtml = '';
      try {
        // Try to fetch QR code from backend
        const qrRes = await api.qr.generate(bookId);
        if (qrRes.success && qrRes.data && qrRes.data.qrCode) {
          qrHtml = `<div style="margin:1.2rem 0 0.7rem 0;text-align:center;"><img src='${qrRes.data.qrCode}' alt='QR Code' style='width:120px;height:120px;border-radius:0.5rem;box-shadow:0 2px 8px #2563eb22;'><div style='font-size:0.97rem;color:#64748b;margin-top:0.3rem;'>Scan to get book info</div></div>`;
        }
      } catch (e) { /* ignore QR errors */ }
      const html = `
        <div style="display:flex;flex-direction:column;align-items:center;">
          <div style="width:140px;height:200px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:0.7rem;overflow:hidden;box-shadow:0 2px 8px #2563eb22;display:flex;align-items:center;justify-content:center;margin-bottom:1.2rem;">
            ${book.coverImage && book.coverImage !== 'default-cover.jpg' ? `<img src="${book.coverImage}" alt="${book.title} Cover" style="width:100%;height:100%;object-fit:cover;">` : `<span style='color:#fff;font-size:2.7rem;font-weight:800;'>${book.title.charAt(0).toUpperCase()}</span>`}
          </div>
          <div style="text-align:center;">
            <div style="font-size:1.25rem;font-weight:700;color:#2563eb;margin-bottom:0.3rem;">${book.title}</div>
            <div style="color:#64748b;font-size:1.05rem;margin-bottom:0.7rem;">by ${book.author}</div>
            <div style="font-size:1.02rem;color:#374151;margin-bottom:1.1rem;">${book.description ? book.description : 'No description available.'}</div>
            <div style="font-size:0.97rem;color:#64748b;margin-bottom:0.3rem;">Genre: <b>${book.genre}</b></div>
            <div style="font-size:0.97rem;color:#64748b;margin-bottom:0.3rem;">ISBN: <b>${book.isbn}</b></div>
            <div style="font-size:0.97rem;color:#64748b;margin-bottom:0.3rem;">Publisher: <b>${book.publisher || '-'}</b></div>
            <div style="font-size:0.97rem;color:#64748b;margin-bottom:0.3rem;">Year: <b>${book.publicationYear || '-'}</b></div>
            <div style="font-size:0.97rem;color:#64748b;margin-bottom:0.3rem;">Copies: <b>${book.availableCopies}/${book.totalCopies}</b></div>
            <div style="font-size:0.97rem;color:#64748b;margin-bottom:0.3rem;">Status: <b>${getStatusText(book)}</b></div>
            ${qrHtml}
          </div>
        </div>
      `;
      showViewBookModal(html);
    }

    // Delete book
    async function deleteBook(bookId) {
      if (!confirm('Are you sure you want to delete this book?')) {
        return;
      }

      try {
        const response = await api.books.delete(bookId);
        
        if (response.success) {
          loadBooks();
          alert('Book deleted successfully!');
        } else {
          throw new Error(response.message);
        }
      } catch (error) {
        console.error('Error deleting book:', error);
        alert('Error deleting book: ' + error.message);
      }
    }

    // Close modal when clicking outside
    bookModal.addEventListener('click', (e) => {
      if (e.target === bookModal) {
        closeBookModal();
      }
    });

    // List of genres/sections
    const carouselSections = [
      { title: 'Popular Books', fetch: async () => (await api.books.getPopular(12)).data || [] },
      { title: 'New Arrivals', fetch: async () => (await api.books.getAll({ sort: 'createdAt', order: 'desc', limit: 12 })).data || [] },
      { title: 'Fiction', fetch: async () => (await api.books.getByCategory('Fiction', { limit: 12 })).data || [] },
      { title: 'Science Fiction', fetch: async () => (await api.books.getByCategory('Science Fiction', { limit: 12 })).data || [] },
      { title: 'Mystery', fetch: async () => (await api.books.getByCategory('Mystery', { limit: 12 })).data || [] },
      { title: 'Romance', fetch: async () => (await api.books.getByCategory('Romance', { limit: 12 })).data || [] },
      { title: 'History', fetch: async () => (await api.books.getByCategory('History', { limit: 12 })).data || [] },
      { title: 'Technology', fetch: async () => (await api.books.getByCategory('Technology', { limit: 12 })).data || [] },
      { title: 'Mythology', fetch: async () => (await api.books.getByCategory('Mythology', { limit: 12 })).data || [] },
    ];

    // Load all carousels
    async function loadCarousels() {
      carouselsContainer.innerHTML = '';
      for (const section of carouselSections) {
        const books = await section.fetch();
        carouselsContainer.innerHTML += renderCarouselSection(section.title, books);
      }
    }
    // Render a single carousel section
    function renderCarouselSection(title, books) {
      if (!books || books.length === 0) return '';
      const carouselHTML = books.map(book => `
        <div class="carousel-card" title="${book.title}">
          <div class="carousel-cover" style="position:relative;">
            ${getCarouselBadges(book)}
            ${book.coverImage && book.coverImage !== 'default-cover.jpg' ? `<img src="${book.coverImage}" alt="${book.title} Cover">` : book.title.charAt(0).toUpperCase()}
          </div>
          <div class="carousel-info">
            <div class="carousel-title-text" title="${book.title}">${book.title}</div>
            <div class="carousel-author" title="${book.author}">by ${book.author}</div>
            <div class="carousel-actions">
              <button class="carousel-btn carousel-btn-secondary" onclick="viewBook('${book._id}')" title="View details">View</button>
              <button class="carousel-btn carousel-btn-primary" onclick="editBook('${book._id}')" title="Edit book">Edit</button>
            </div>
          </div>
        </div>
      `).join('');
      return `
        <div class="carousel-section">
          <div class="carousel-title">${title}</div>
          <div class="carousel-row">${carouselHTML}</div>
        </div>
      `;
    }
    // On page load, load carousels
    document.addEventListener('DOMContentLoaded', loadCarousels);
  </script>
  <script>
document.addEventListener('DOMContentLoaded', function() {
  const bokeh = document.querySelector('.bokeh-bg');
  if (bokeh) {
    bokeh.innerHTML = `
      <div class="bokeh-gradient"></div>
      <div class="bokeh-circle bokeh1"></div>
      <div class="bokeh-circle bokeh2"></div>
      <div class="bokeh-circle bokeh3"></div>
      <div class="bokeh-circle bokeh4"></div>
      <div class="bokeh-circle bokeh5"></div>
      <div class="bokeh-circle bokeh6"></div>
      <div class="bokeh-circle bokeh7"></div>
      <div class="bokeh-circle bokeh8"></div>
      <div class="bokeh-circle bokeh9"></div>
      <div class="bokeh-circle bokeh10"></div>
      <div class="sparkle sparkle1"></div>
      <div class="sparkle sparkle2"></div>
      <div class="sparkle sparkle3"></div>
      <div class="sparkle sparkle4"></div>
      <div class="sparkle sparkle5"></div>
    `;
  }
});
</script>
</body>
</html> 