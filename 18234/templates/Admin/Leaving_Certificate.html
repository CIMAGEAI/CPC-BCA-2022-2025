{% extends "Admin/AdminMaster.html" %}

{% block title %}Leaving Certificate | Admin Panel{% endblock %}

{% block head %}
<!-- Bootstrap CSS -->

<style>
    .gradient-border {
        --borderWidth: 10px;
        position: relative;
        border-radius: var(--borderWidth);
        background: wheat;
        max-width: calc(100% - 20px);
        margin: 10px auto;
        padding: 20px;
        z-index: 1;
        box-shadow: 0 0 12px 5px #EB1616;
    }



    @keyframes animatedgradient {
        0% {
            background-position: 0% 50%;
        }

        50% {
            background-position: 100% 50%;
        }

        100% {
            background-position: 0% 50%;
        }
    }

    .para1 {
        font-size: 24px;
        text-align: justify;
        line-height: 2;
        font-family: cursive;
    }

    .schoolheading {
        font-size: 35px;
        line-height: 1;
        color: rgb(108, 114, 147);
    }

    .schooladdress,
    .schoolmobile {
        font-size: 25px;
        line-height: 1.2;
    }

    #print1 {
        padding: 20px;
        position: relative;
        z-index: 1;
    }
</style>

<script>
    function printDiv() {
        var printContents = document.getElementById("print1").outerHTML;
        var printWindow = window.open('', '_blank');

        printWindow.document.write('<html><head><title>Leaving Certificate</title>');

        printWindow.document.write(`
            <style>
                @page {
                    size: A4 portrait;
                    margin: 10mm;
                }

                html, body {
                    margin: 0;
                    padding: 0;
                    font-size: 100%;
                    -webkit-print-color-adjust: exact;
                }

                body * {
                    box-sizing: border-box;
                }

                .gradient-border {
                    --borderWidth: 10px;
                    position: relative;
                    border-radius: var(--borderWidth);
                  background: wheat;
        max-width: calc(100% - 20px);
        margin: 10px auto;
        padding: 20px;
        z-index: 1;
        box-shadow: 0 0 12px 5px #EB1616;
                    page-break-inside: avoid;
                }

                .text-center {
    text-align: center !important;
}
                .para1 {
                    font-size: 20px;
                    line-height: 1.8;
                    font-family: cursive;
                    text-align: justify;
                }

                .schoolheading {
                    font-size: 28px;
                    line-height: 1;
                    color:rgb(108, 114, 147);
                    text-aling:center;
                }

                .schooladdress, .schoolmobile {
                    font-size: 20px;
                    line-height: 1.2;
                }

                .sign {
                    page-break-inside: avoid;
                    display: flex;
                    justify-content: space-between;
                    margin-top: 40px;
                }

                .sign .para1 {
                    font-size: 18px;
                }
            </style>
        `);

        printWindow.document.write('</head><body>');
        printWindow.document.write(printContents);
        printWindow.document.write('</body></html>');

        printWindow.document.close();

        setTimeout(() => {
            printWindow.print();
        }, 500);
    }
</script>

{% endblock %}

{% block content %}
<div class="container-fluid py-5">
    <div class="row mb-3">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <a href="{{ url_for('admin.student_details.student_details') }}" class="btn btn-secondary">Back</a>
        </div>
        <div class="col-md-2"></div>
    </div>

    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
            <div class="gradient-border position-relative" id="print1">
                <div class="text-center">
                    <h1 class="pb-0 schoolheading text-center">{{ school.Name }}</h1>
                    <p class="pb-0 mb-0 schooladdress">Address: {{ school.Address }}</p>
                    <p class="pb-0 schoolmobile">Mobile No: {{ school.Mobile }}</p>
                </div>

                <br />

                <p class="para1">
                    This is to certify that <b>{{ certificate.Name }}</b> Admission No. <b>{{ certificate.StudentID
                        }}</b>,
                    Father's Name: <b>{{ certificate.FatherName }}</b> and Mother's Name: <b>{{ certificate.MotherName
                        }}</b>,
                    Date Of Birth: <b>{{ certificate.Dob }}</b>, Nationality: <b>{{ certificate.Nationality }}</b>.
                    Was enrolled on <b>{{ certificate.AdmissionDate }}</b> in Standard <b>{{ certificate.AdmittedClass
                        }}</b>
                    and left on <b>{{ certificate.LeavingDate }}</b> from Standard <b>{{ certificate.Class }}</b>.
                    Pupil's Participation in Co-curricular Activities: <b>{{ certificate.Activities }}</b>,
                    Behaviour: <b>{{ certificate.Behaviour }}</b>.
                    Reason for leaving school: <b>{{ certificate.Reason }}</b>.
                </p>

                <br /><br />

                <div class="row sign">
                    <div class="col-md-6">
                        <p class="para1">Student Signature:</p>
                        <p class="para1">Date of Issue: <b>{{ certificate.IssueDate }}</b></p>
                    </div>
                    <div class="col-md-6 text-end">
                        <p class="para1">Head Teacher Signature:</p>
                        <p class="para1">Official School Rubber Stamp</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-2"></div>
    </div>

    <div class="row mt-5">
        <div class="col-md-2"></div>
        <div class="col-md-8 d-flex justify-content-between">
            <button type="button" class="btn btn-danger" onclick="printDiv()">Print Certificate</button>
            <form method="POST"
                action="{{ url_for('admin.view_leaving_certificate.delete_leaving_certificate', student_id=certificate.StudentID) }}"
                style="display:inline;">
                <button type="submit" class="btn btn-danger"
                    onclick="return confirm('Are you sure you want to delete this certificate?')">
                    Delete Certificate
                </button>
            </form>
            <a href="{{ url_for('admin.modify_leaving_certificate.modify_leaving_certificate') }}" class="btn btn-info">
                Modify Certificate
            </a>
        </div>
        <div class="col-md-2"></div>
    </div>
</div>
{% endblock %}