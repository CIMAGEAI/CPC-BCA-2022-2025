<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Us | LibraryPro</title>
  <link rel="stylesheet" href="style/contact.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
</head>
<body>
      <header>
    <nav class="navbar">
      <div class="logo">
        <a href="index.html" style="color:inherit;text-decoration:none;">
          <i class="fas fa-book-open"></i> LibraryPro
        </a>
      </div>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="books.html">Books</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html" class="active">Contact</a></li>
        <li><a href="login.html">Login</a></li>
        <li><a href="register.html">Register</a></li>
      </ul>
      <div class="mobile-menu-btn">
        <i class="fas fa-bars"></i>
      </div>
    </nav>
  </header>

  <main class="contact-container">
    <!-- Hero Section with Animated Background -->
    <section class="hero-section animate-on-scroll">
      <div class="hero-background">
        <div class="floating-shapes">
          <div class="shape shape-1"></div>
          <div class="shape shape-2"></div>
          <div class="shape shape-3"></div>
          <div class="shape shape-4"></div>
        </div>
      </div>
      <div class="hero-content">
        <div class="hero-badge animate-on-scroll">
          <i class="fas fa-star"></i>
          <span>24/7 Support Available</span>
        </div>
        <h1 class="hero-title animate-on-scroll">
          <span class="gradient-text">Get in Touch</span>
          <br>We're Here to Help
        </h1>
        <p class="hero-description animate-on-scroll">
          Have questions, suggestions, or need support? We'd love to hear from you. 
          Our team is ready to assist you with any library-related inquiries.
        </p>
        <div class="hero-stats animate-on-scroll">
          <div class="stat-item">
            <div class="stat-number" data-target="24">0</div>
            <div class="stat-label">Hour Response</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" data-target="99">0</div>
            <div class="stat-label">% Satisfaction</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" data-target="1000">0</div>
            <div class="stat-label">Happy Users</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Content -->
    <section class="contact-content">
      <!-- Contact Form Section -->
      <div class="contact-form-section animate-on-scroll">
        <div class="form-container">
          <div class="form-header">
            <div class="form-icon">
              <i class="fas fa-paper-plane"></i>
            </div>
            <h2>Send us a Message</h2>
            <p>Fill out the form below and we'll get back to you within 24 hours. We're here to help!</p>
          </div>
          
          <form id="contactForm" class="contact-form" novalidate>
            <div class="form-row">
              <div class="form-group">
                <div class="input-wrapper">
                  <i class="fas fa-user input-icon"></i>
                  <input type="text" id="contactName" name="contactName" required 
                         minlength="2" maxlength="50" 
                         pattern="^[a-zA-Z\s]+$"
                         placeholder="Enter your full name">
                  <label for="contactName">Your Name</label>
                  <div class="input-line"></div>
                  <div class="error-message-field" id="nameError"></div>
                  <div class="char-counter" id="nameCounter">0/50</div>
                </div>
              </div>
              <div class="form-group">
                <div class="input-wrapper">
                  <i class="fas fa-envelope input-icon"></i>
                  <input type="email" id="contactEmail" name="contactEmail" required
                         placeholder="Enter your email address">
                  <label for="contactEmail">Your Email</label>
                  <div class="input-line"></div>
                  <div class="error-message-field" id="emailError"></div>
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-tag input-icon"></i>
                <select id="contactSubject" name="contactSubject" required>
                  <option value="">Select Subject</option>
                  <option value="general">General Inquiry</option>
                  <option value="technical">Technical Support</option>
                  <option value="billing">Billing Question</option>
                  <option value="feedback">Feedback</option>
                  <option value="other">Other</option>
                </select>
                <div class="input-line"></div>
                <div class="error-message-field" id="subjectError"></div>
              </div>
            </div>
            
            <div class="form-group">
              <div class="input-wrapper">
                <i class="fas fa-comment input-icon"></i>
                <textarea id="contactMessage" name="contactMessage" required 
                          minlength="10" maxlength="1000" rows="5"
                          placeholder="Tell us about your inquiry or issue..."></textarea>
                <label for="contactMessage">Your Message</label>
                <div class="input-line"></div>
                <div class="error-message-field" id="messageError"></div>
                <div class="char-counter" id="messageCounter">0/1000</div>
              </div>
            </div>
            
            <div class="form-validation-summary" id="formValidationSummary"></div>
            
            <button type="submit" class="submit-btn" id="submitBtn">
              <span class="btn-text">
                <i class="fas fa-paper-plane"></i>
                Send Message
              </span>
              <span class="btn-loading">
                <i class="fas fa-spinner fa-spin"></i>
                Sending...
              </span>
            </button>
            
            <div id="contactSuccess" class="success-message"></div>
            <div id="contactError" class="error-message"></div>
          </form>
        </div>
      </div>

      <!-- Contact Info Section -->
      <div class="contact-info-section animate-on-scroll">
        <div class="info-container">
          <div class="info-header">
            <div class="info-icon">
              <i class="fas fa-info-circle"></i>
            </div>
        <h3>Contact Information</h3>
            <p>Reach out to us through any of these channels</p>
          </div>
          
          <div class="contact-cards">
            <div class="contact-card animate-on-scroll" data-delay="0.1">
              <div class="card-icon">
                <i class="fas fa-envelope"></i>
              </div>
              <div class="card-content">
                <h4>Email Support</h4>
                <p>Get quick responses to your questions</p>
                <a href="mailto:support@librarypro.com" class="contact-link">
                  support@librarypro.com
                </a>
              </div>
            </div>
            
            <div class="contact-card animate-on-scroll" data-delay="0.2">
              <div class="card-icon">
                <i class="fas fa-phone"></i>
              </div>
              <div class="card-content">
                <h4>Phone Support</h4>
                <p>Speak directly with our support team</p>
                <a href="tel:+918102624230" class="contact-link">
                  +91 8102624230
                </a>
              </div>
            </div>
            
            <div class="contact-card animate-on-scroll" data-delay="0.3">
              <div class="card-icon">
                <i class="fas fa-map-marker-alt"></i>
              </div>
              <div class="card-content">
                <h4>Visit Us</h4>
                <p>Drop by our office for in-person support</p>
                <address class="contact-link">
                  MRD 7 Vivekanand Park Road,<br>
                  Patliputra colony ALpana Market<br>
                  Patna 800013
                </address>
              </div>
            </div>
            
            <div class="contact-card animate-on-scroll" data-delay="0.4">
              <div class="card-icon">
                <i class="fas fa-clock"></i>
              </div>
              <div class="card-content">
                <h4>Business Hours</h4>
                <p>We're available during these times</p>
                <div class="hours">
                  <div class="hour-item">
                    <span>Monday - Friday:</span>
                    <span>9:00 AM - 6:00 PM</span>
                  </div>
                  <div class="hour-item">
                    <span>Saturday:</span>
                    <span>10:00 AM - 4:00 PM</span>
                  </div>
                  <div class="hour-item">
                    <span>Sunday:</span>
                    <span>Closed</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="contact-note animate-on-scroll" data-delay="0.5">
            <div class="note-icon">
              <i class="fas fa-lightbulb"></i>
            </div>
            <div class="note-content">
              <h4>Need Immediate Help?</h4>
              <p>For urgent technical issues, please call our support line. For general inquiries, email us and we'll respond within 24 hours.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section animate-on-scroll">
      <div class="faq-container">
        <div class="section-header">
          <h2>Frequently Asked Questions</h2>
          <p>Quick answers to common questions</p>
        </div>
        
        <div class="faq-grid">
          <div class="faq-item animate-on-scroll" data-delay="0.1">
            <div class="faq-question">
              <h4>How do I borrow a book?</h4>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <p>Simply browse our book collection, click on a book you're interested in, and use the "Borrow" button. You'll need to be logged in to your account.</p>
            </div>
          </div>
          
          <div class="faq-item animate-on-scroll" data-delay="0.2">
            <div class="faq-question">
              <h4>What happens if I return a book late?</h4>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <p>Late returns incur a fine of $1 per day. You can view and pay your fines in the "My Fines" section of your account.</p>
            </div>
          </div>
          
          <div class="faq-item animate-on-scroll" data-delay="0.3">
            <div class="faq-question">
              <h4>How long can I keep a book?</h4>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <p>Books are typically issued for 7 days. You can extend this period by contacting our support team if needed.</p>
            </div>
          </div>
          
          <div class="faq-item animate-on-scroll" data-delay="0.4">
            <div class="faq-question">
              <h4>Can I reserve a book that's currently borrowed?</h4>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="faq-answer">
              <p>Yes! If a book is currently borrowed, you can place a reservation. We'll notify you when it becomes available.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

    <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h3><i class="fas fa-book-open"></i> LibraryPro</h3>
        <p>Modern library management for the digital age</p>
        <div class="social-links">
          <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
          <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
          <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
      <div class="footer-section">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="books.html">Browse Books</a></li>
          <li><a href="about.html">About Us</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="login.html">Login</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Support</h4>
        <ul>
          <li><a href="contact.html">Help Center</a></li>
          <li><a href="contact.html">Documentation</a></li>
          <li><a href="contact.html">API Reference</a></li>
          <li><a href="contact.html">Status</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Contact Info</h4>
        <div class="contact-info">
          <p><i class="fas fa-envelope"></i> support@librarypro.com</p>
          <p><i class="fas fa-phone"></i> +91 8102624230</p>
          <p><i class="fas fa-map-marker-alt"></i> MRD 7 Vivekanand Park Road, Patliputra colony ALpana Market Patna 800013</p>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 LibraryPro. All rights reserved. | Made with <i class="fas fa-heart"></i> for book lovers</p>
    </div>
    </footer> 

     <script>
    // Navbar login/logout logic
    const token = localStorage.getItem('token');
    const user = localStorage.getItem('user') ? JSON.parse(localStorage.getItem('user')) : null;
    const navLinks = document.querySelector('.nav-links');
    
    if (navLinks) {
      if (token) {
        let adminLink = '';
        if (user && user.role === 'admin') {
          adminLink = '<li><a href="admin/admin.html">Admin Dashboard</a></li>';
        }
        navLinks.innerHTML = `
          <li><a href="index.html">Home</a></li>
          <li><a href="books.html">Books</a></li>
          <li><a href="fines.html">My Fines</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html" class="active">Contact</a></li>
          ${adminLink}
          <li class="user-menu">
            <span class="user-avatar" title="Profile">
              <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="User" width="28" height="28" style="border-radius:50%;vertical-align:middle;"> 
              <span class="user-name">${user ? user.name.split(' ')[0] : 'User'}</span>
            </span>
            <ul class="user-dropdown">
              <li><a href="#" id="logoutBtn">Logout</a></li>
            </ul>
          </li>
        `;
        
        // Dropdown logic
        const userMenu = document.querySelector('.user-menu');
        const dropdown = document.querySelector('.user-dropdown');
        if (userMenu && dropdown) {
          userMenu.addEventListener('mouseenter', () => dropdown.style.display = 'block');
          userMenu.addEventListener('mouseleave', () => dropdown.style.display = 'none');
        }
        
        document.getElementById('logoutBtn').onclick = function(e) {
          e.preventDefault();
          localStorage.removeItem('token');
          localStorage.removeItem('user');
          window.location.href = 'login.html';
        };
      } else {
        navLinks.innerHTML = `
          <li><a href="index.html">Home</a></li>
          <li><a href="books.html">Books</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html" class="active">Contact</a></li>
          <li><a href="login.html">Login</a></li>
          <li><a href="register.html">Register</a></li>
        `;
      }
    }

    // Enhanced Intersection Observer for animations
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const delay = entry.target.getAttribute('data-delay') || 0;
          
          setTimeout(() => {
            entry.target.classList.add('animate-in');
            
            // Animate counters when stats section is visible
            if (entry.target.classList.contains('hero-stats')) {
              const counters = entry.target.querySelectorAll('.stat-number');
              counters.forEach((counter, index) => {
                setTimeout(() => {
                  const target = parseInt(counter.getAttribute('data-target'));
                  animateCounter(counter, target);
                }, index * 200);
              });
            }
          }, delay * 1000);
        }
      });
    }, observerOptions);

    // Animated counter function
    function animateCounter(element, target) {
      let current = 0;
      const increment = target / 100;
      const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
          current = target;
          clearInterval(timer);
        }
        element.textContent = Math.floor(current);
      }, 20);
    }

    // Observe elements for animation
    document.addEventListener('DOMContentLoaded', () => {
      const animateElements = document.querySelectorAll('.animate-on-scroll, .contact-card, .faq-item, .hero-stats, .section-header');
      animateElements.forEach(el => observer.observe(el));
    });

    // Mobile menu toggle
    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const navLinksContainer = document.querySelector('.nav-links');
    
    if (mobileMenuBtn) {
      mobileMenuBtn.addEventListener('click', () => {
        navLinksContainer.classList.toggle('active');
      });
    }

    // FAQ Accordion functionality
    document.querySelectorAll('.faq-question').forEach(question => {
      question.addEventListener('click', () => {
        const faqItem = question.parentElement;
        const answer = faqItem.querySelector('.faq-answer');
        const icon = question.querySelector('i');
        
        // Close other open FAQs
        document.querySelectorAll('.faq-item').forEach(item => {
          if (item !== faqItem) {
            item.classList.remove('active');
            item.querySelector('.faq-answer').style.maxHeight = null;
            item.querySelector('.faq-question i').classList.remove('rotate');
          }
        });
        
        // Toggle current FAQ
        faqItem.classList.toggle('active');
        if (faqItem.classList.contains('active')) {
          answer.style.maxHeight = answer.scrollHeight + 'px';
          icon.classList.add('rotate');
      } else {
          answer.style.maxHeight = null;
          icon.classList.remove('rotate');
        }
      });
    });

    // Contact Form Handler
    document.addEventListener('DOMContentLoaded', function() {
      const contactForm = document.getElementById('contactForm');
      const submitBtn = document.getElementById('submitBtn');
      const successMsg = document.getElementById('contactSuccess');
      const errorMsg = document.getElementById('contactError');
      
      // Character counters
      const nameInput = document.getElementById('contactName');
      const messageInput = document.getElementById('contactMessage');
      const nameCounter = document.getElementById('nameCounter');
      const messageCounter = document.getElementById('messageCounter');
      
      // Update character counters
      nameInput.addEventListener('input', function() {
        const length = this.value.length;
        nameCounter.textContent = `${length}/50`;
        nameCounter.className = `char-counter ${length > 45 ? 'warning' : ''}`;
      });
      
      messageInput.addEventListener('input', function() {
        const length = this.value.length;
        messageCounter.textContent = `${length}/1000`;
        messageCounter.className = `char-counter ${length > 900 ? 'warning' : ''}`;
      });
      
      // Form submission
      contactForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Basic validation
        const name = document.getElementById('contactName').value.trim();
        const email = document.getElementById('contactEmail').value.trim();
        const subject = document.getElementById('contactSubject').value;
        const message = document.getElementById('contactMessage').value.trim();
        
        // Clear previous messages
        successMsg.style.display = 'none';
        errorMsg.style.display = 'none';
        
        // Validation
        if (!name || name.length < 2) {
          showError('Please enter a valid name (at least 2 characters)');
          return;
        }
        
        if (!email || !email.includes('@')) {
          showError('Please enter a valid email address');
          return;
        }
        
        if (!subject) {
          showError('Please select a subject');
          return;
        }
        
        if (!message || message.length < 10) {
          showError('Please enter a message (at least 10 characters)');
          return;
        }
        
        // Show loading state
        submitBtn.classList.add('loading');
        submitBtn.disabled = true;
        
        try {
          const response = await fetch('http://localhost:5000/api/contact', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              name: name,
              email: email,
              subject: subject,
              message: message
            })
          });
          
          const data = await response.json();
          
          if (response.ok && data.success) {
            showSuccess(data.message || 'Thank you! Your message has been sent successfully. We\'ll get back to you within 24 hours.');
            contactForm.reset();
            // Reset counters
            nameCounter.textContent = '0/50';
            messageCounter.textContent = '0/1000';
            nameCounter.className = 'char-counter';
            messageCounter.className = 'char-counter';
          } else {
            showError(data.message || 'Failed to send message. Please try again.');
          }
        } catch (error) {
          console.error('Contact form error:', error);
          showError('Network error. Please check your connection and try again.');
        } finally {
          submitBtn.classList.remove('loading');
          submitBtn.disabled = false;
        }
      });
      
      function showSuccess(message) {
        successMsg.textContent = message;
        successMsg.style.display = 'block';
        errorMsg.style.display = 'none';
        
        setTimeout(() => {
          successMsg.style.display = 'none';
        }, 5000);
      }
      
      function showError(message) {
        errorMsg.textContent = message;
        errorMsg.style.display = 'block';
        successMsg.style.display = 'none';
        
        setTimeout(() => {
          errorMsg.style.display = 'none';
        }, 5000);
      }
    });

    // Floating shapes animation
    function animateShapes() {
      const shapes = document.querySelectorAll('.shape');
      shapes.forEach((shape, index) => {
        shape.style.animationDelay = `${index * 2}s`;
      });
    }

    // Initialize floating shapes
    animateShapes();
  </script>
</body>
</html>